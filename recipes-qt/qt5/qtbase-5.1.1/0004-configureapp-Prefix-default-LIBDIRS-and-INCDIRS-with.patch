From 698f073fb8cc6dc1ced277b6ae2056cb9d02f2d5 Mon Sep 17 00:00:00 2001
From: Martin Jansa <Martin.Jansa@gmail.com>
Date: Sat, 27 Apr 2013 22:33:33 +0200
Subject: [PATCH 04/14] configureapp: Prefix default LIBDIRS and INCDIRS with
 SYSROOT

Upstream-Status: Pending
---
 tools/configure/configureapp.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

Index: qtbase-opensource-src-5.1.1/tools/configure/configureapp.cpp
===================================================================
--- qtbase-opensource-src-5.1.1.orig/tools/configure/configureapp.cpp	2014-04-18 00:43:41.000000000 +0000
+++ qtbase-opensource-src-5.1.1/tools/configure/configureapp.cpp	2014-04-18 00:50:33.013242392 +0000
@@ -3111,8 +3111,9 @@
         configStream << "QT_HOST_CPU_FEATURES = " << dictionary["QT_HOST_CPU_FEATURES"] << endl;
         if (dictionary.contains("XQMAKESPEC") && !dictionary["XQMAKESPEC"].startsWith("wince")) {
             // FIXME: add detection
-            configStream << "QMAKE_DEFAULT_LIBDIRS = /lib /usr/lib" << endl;
-            configStream << "QMAKE_DEFAULT_INCDIRS = /usr/include /usr/local/include" << endl;
+            configStream << "QMAKE_DEFAULT_LIBDIRS = $$[QT_SYSROOT]/lib $$[QT_SYSROOT]/usr/lib" << endl;
+            configStream << "QMAKE_DEFAULT_INCDIRS = $$[QT_SYSROOT]/usr/include $$[QT_SYSROOT]/usr/local/include" << endl;
+
         }
         if (dictionary["QT_EDITION"].contains("OPENSOURCE"))
             configStream << "QT_EDITION = " << QLatin1String("OpenSource") << endl;
